<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="edu.spring.homeshare.ReportMapper">


<!-- insert -->
	
	<insert id="insert">
		insert into ${report}
		values(0,#{reportMemNo},#{reportHouseNo},#{reason},#{reportedHostNo})
	</insert>
	
	<select id="select_all_by_houseNo" resultType="reportVO">
		select *
		from ${report} where ${reportHouseNo} = #{reportHouseNo}
	</select>
	
	<select id="select_all" resultType="reportVO">
		select *
		from ${report} 
	</select>
	
	<!-- 숙소기준 페이징 -->
	<select id="reportPaging" resultType="reportVO">
		select
		*
		from (
		select rownum rn,
		a.*
		from (
		select *
		from ${reply} where ${reportHouseNo} = #{reportHouseNo}
		) a
		) b
		where rn
		between #{start} and #{end}
	</select>
	
	<!-- select count report의 memno 구하기 -->
	<select id="select_count_by_houseNo" resultType="Integer">
		SELECT
		COUNT(*)
		FROM ${report}
		where ${reportHouseNo} = #{reportHouseNo}
	</select>
	
	
	
	
	<!-- hostid 페이징 -->
	<select id="reportPagingHostId" resultType="reportVO">
		select
		*
		from (
		select rownum rn,
		a.*
		from (
		select *
		from ${report} 
		where
		 ${reportHostId} = #{reportHostId}
	
		) a
		) b
		where rn
		between #{start} and #{end}
	</select>
	
	
	
	
	
	
	
	<!-- select count report의 memno 구하기 -->
	<select id="select_count_by_hostId" resultType="Integer">
		SELECT
		COUNT(*)
		FROM report
		where ${reportHostId} = #{reportHostId}
	</select>
	
	
	<delete id="delete">
	delete from report
		where ${reportNo} = #{reportNo}
	</delete>
	
	
	
	
</mapper>
